<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì–´íœ˜ ì‹œí—˜ì§€ ì¶œë ¥ - ë¸”ë¼ì¸ì‰ê¸€ë¦¬ì‰¬</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://cdn.jsdelivr.net/npm/pretendard/dist/web/variable/pretendardvariable.css" rel="stylesheet" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: "Pretendard Variable", -apple-system, BlinkMacSystemFont,
        system-ui, "Noto Sans KR", sans-serif;
    }
    body {
      background: #ffffff;
      padding: 20px;
    }
    .page {
      max-width: 900px;
      margin: 0 auto;
    }
    h1 {
      font-size: 24px;
      font-weight: 800;
      margin-bottom: 4px;
    }
    .subtitle {
      font-size: 14px;
      color: #6b7280;
      margin-bottom: 16px;
    }
    .info-line {
      font-size: 14px;
      margin-bottom: 8px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 12px;
      font-size: 14px;
    }
    th, td {
      border: 1px solid #d1d5db;
      padding: 6px 8px;
      word-break: break-all;
    }
    th {
      background: #f3f4f6;
      text-align: center;
    }
    td.blanks {
      height: 28px;
    }
    .print-tip {
      font-size: 12px;
      color: #9ca3af;
      margin-top: 12px;
    }
    @media print {
      body {
        padding: 0;
      }
      .print-tip {
        display: none;
      }
    }
  </style>
</head>
<body>
<div class="page">
  <h1>ì–´íœ˜ ì‹œí—˜ì§€</h1>
  <div id="subtitle" class="subtitle"></div>

  <div class="info-line">ì´ë¦„: ____________________________</div>
  <div class="info-line">ë‚ ì§œ: ____________________________</div>

  <table id="wordTable">
    <thead>
      <tr>
        <th style="width:40px;">ë²ˆí˜¸</th>
        <th style="width:200px;">ì˜ì–´ ë‹¨ì–´</th>
        <th>ëœ»</th>
      </tr>
    </thead>
    <tbody>
      <!-- JSë¡œ ë‹¨ì–´ ì±„ì›€ -->
    </tbody>
  </table>

  <div class="print-tip">
    ì´ ì°½ì´ ëœ¨ë©´ ë¸Œë¼ìš°ì € ì¸ì‡„(âŒ˜+P / Ctrl+P)ë¡œ ì¶œë ¥í•˜ì„¸ìš”.
  </div>
</div>

<!-- words.js ì‚¬ìš© -->
<script src="words.js"></script>
<script>
  const subtitleEl = document.getElementById("subtitle");
  const tableBody  = document.querySelector("#wordTable tbody");

  // ?level=1&sets=1,2&count=20
  const params = new URLSearchParams(window.location.search);
  const levelParam = params.get("level") || "";
  const setsParam  = params.get("sets") || "";
  const countParam = params.get("count") || "";

  const setNumbers = setsParam
    .split(",")
    .map(s => s.trim())
    .filter(s => s !== "");

  // ğŸ”¹ ì„œë¸Œíƒ€ì´í‹€: ì–´íœ˜ 1-1 / ì–´íœ˜ 1-1, 1-2
  if (levelParam && setNumbers.length > 0) {
    const units = setNumbers.map(sn => `${levelParam}-${sn}`);
    subtitleEl.textContent = `ì–´íœ˜ ${units.join(", ")}`;
  } else {
    subtitleEl.textContent = "ì–´íœ˜ ì‹œí—˜ì§€";
  }

  function loadWords() {
    if (!levelParam || setNumbers.length === 0) {
      alert("ë ˆë²¨ ë˜ëŠ” ì„¸íŠ¸ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.");
      return;
    }

    const db = window.WORD_DB || {};
    let allWords = [];

    // level=1, sets=1,2 â†’ "1-1", "1-2"
    setNumbers.forEach(sn => {
      const key = `${levelParam}-${sn}`;
      const list = db[key] || [];
      allWords = allWords.concat(list);
    });

    if (allWords.length === 0) {
      alert("í•´ë‹¹ ì„¸íŠ¸ì—ì„œ ë‹¨ì–´ë¥¼ ì°¾ì§€ ëª»í–ˆì–´ìš”. (words.js í™•ì¸)");
      return;
    }

    let limit = Number(countParam);
    if (!limit || limit <= 0) {
      limit = allWords.length;
    }
    const usedWords = allWords.slice(0, limit);

    tableBody.innerHTML = "";
    usedWords.forEach((row, idx) => {
      const tr = document.createElement("tr");

      const tdNo = document.createElement("td");
      tdNo.textContent = idx + 1;
      tdNo.style.textAlign = "center";

      const tdEng = document.createElement("td");
      const eng = row.word || row.english || "";
      tdEng.textContent = eng;

      const tdBlank = document.createElement("td");
      tdBlank.className = "blanks";

      tr.appendChild(tdNo);
      tr.appendChild(tdEng);
      tr.appendChild(tdBlank);
      tableBody.appendChild(tr);
    });

    setTimeout(() => {
      window.print();
    }, 500);
  }

  loadWords();
</script>
</body>
</html>
